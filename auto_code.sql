/*
 Navicat Premium Data Transfer

 Source Server         : local
 Source Server Type    : MySQL
 Source Server Version : 50614
 Source Host           : 127.0.0.1
 Source Database       : auto_code

 Target Server Type    : MySQL
 Target Server Version : 50614
 File Encoding         : utf-8

 Date: 12/21/2015 17:16:14 PM
*/

SET NAMES utf8;
SET FOREIGN_KEY_CHECKS = 0;

-- ----------------------------
--  Table structure for `back_user`
-- ----------------------------
DROP TABLE IF EXISTS `back_user`;
CREATE TABLE `back_user` (
  `username` varchar(20) NOT NULL,
  `password` varchar(50) NOT NULL,
  `add_time` datetime NOT NULL,
  PRIMARY KEY (`username`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- ----------------------------
--  Records of `back_user`
-- ----------------------------
BEGIN;
INSERT INTO `back_user` VALUES ('aaaa', '123456', '2015-01-05 11:52:26'), ('admin', 'admin', '2014-06-24 10:12:49');
COMMIT;

-- ----------------------------
--  Table structure for `datasource_config`
-- ----------------------------
DROP TABLE IF EXISTS `datasource_config`;
CREATE TABLE `datasource_config` (
  `dc_id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) DEFAULT NULL,
  `driver_class` varchar(50) DEFAULT NULL,
  `jdbc_url` varchar(100) DEFAULT NULL,
  `username` varchar(50) DEFAULT NULL,
  `password` varchar(50) DEFAULT NULL,
  `back_user` varchar(20) DEFAULT NULL,
  PRIMARY KEY (`dc_id`),
  KEY `f_username_user` (`username`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8;

-- ----------------------------
--  Records of `datasource_config`
-- ----------------------------
BEGIN;
INSERT INTO `datasource_config` VALUES ('4', 'aaa', 'com.mysql.jdbc.Driver', 'jdbc:mysql://localhost:3306/auto_code', 'root', 'chinavane', 'admin'), ('5', 'ISP', 'net.sourceforge.jtds.jdbc.Driver', 'jdbc:jtds:sqlserver://192.168.9.31:1433;databaseName=isp', 'sa', 'isp#123', 'admin'), ('6', 'rms', 'com.mysql.jdbc.Driver', 'jdbc:mysql://localhost:3306/rms', 'root', 'chinavane', 'admin'), ('7', 'rytDB', 'com.mysql.jdbc.Driver', 'jdbc:mysql://localhost:3306/rytDB', 'root', 'chinavane', 'admin'), ('8', 'ryt', 'com.mysql.jdbc.Driver', 'jdbc:mysql://192.168.0.100:3306/ruytonweb', 'ruytoner', 'Ryt1313', 'admin'), ('9', 'ryt01', 'com.mysql.jdbc.Driver', 'jdbc:mysql://139.196.34.213:3306/rytLog', 'ruytoner', 'Ryt1313', 'admin');
COMMIT;

-- ----------------------------
--  Table structure for `template_config`
-- ----------------------------
DROP TABLE IF EXISTS `template_config`;
CREATE TABLE `template_config` (
  `tc_id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) DEFAULT NULL,
  `save_path` varchar(100) DEFAULT NULL,
  `suffix` varchar(20) DEFAULT NULL,
  `content` text,
  `back_user` varchar(20) DEFAULT NULL,
  `Model` varchar(20) DEFAULT NULL,
  PRIMARY KEY (`tc_id`),
  KEY `f_backuser` (`back_user`)
) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8;

-- ----------------------------
--  Records of `template_config`
-- ----------------------------
BEGIN;
INSERT INTO `template_config` VALUES ('8', 'durc_Entity', 'entity', 'java', 'package ${context.packageName}.entity.${ModelName};\r\n\r\nimport java.util.Date;\r\n\r\npublic class ${context.javaBeanName} {\r\n#foreach($column in $columns) \r\n	private ${column.javaTypeBox} ${column.columnName};\r\n#end\r\n\r\n#foreach(${column} in ${columns}) \r\n	public void set${column.javaFieldNameUF}(${column.javaTypeBox} ${column.columnName}){\r\n		this.${column.columnName} = ${column.columnName};\r\n	}\r\n\r\n	public ${column.javaTypeBox} get${column.javaFieldNameUF}(){\r\n		return this.${column.columnName};\r\n	}\r\n\r\n#end\r\n}', 'admin', null), ('9', 'durc_DAO', 'dao', 'java', 'package ${context.packageName}.dao.${ModelName};\r\n\r\nimport org.durcframework.core.dao.BaseDao;\r\nimport ${context.packageName}.entity.${ModelName}.${context.javaBeanName};\r\n\r\npublic interface ${context.javaBeanName}Dao extends BaseDao<${context.javaBeanName}> {\r\n}', 'admin', 'Dao'), ('10', 'durc_Service', 'service', 'java', 'package ${context.packageName}.service.${ModelName};\r\n\r\nimport org.durcframework.core.service.CrudService;\r\nimport ${context.packageName}.dao.${ModelName}.${context.javaBeanName}Dao;\r\nimport ${context.packageName}.entity.${ModelName}.${context.javaBeanName};\r\nimport org.springframework.stereotype.Service;\r\n\r\n@Service\r\npublic class ${context.javaBeanName}Service extends CrudService<${context.javaBeanName}, ${context.javaBeanName}Dao> {\r\n\r\n}', 'admin', 'Service'), ('11', 'durc_SearchEntity', 'entity', 'java', 'package ${context.packageName}.entity.${ModelName};\r\n\r\nimport java.util.Date;\r\n\r\nimport org.durcframework.core.expression.annotation.ValueField;\r\nimport org.durcframework.core.support.SearchEasyUI;\r\nimport org.durcframework.core.util.DateUtil;\r\n\r\n\r\npublic class ${context.javaBeanName}Sch extends SearchEasyUI{\r\n\r\n	//根据时间进行搜索的部分\r\n	private Date createdStartSch;\r\n	private Date createdEndSch;\r\n\r\n	@ValueField(column = \"createdTime\", equal = \">=\")\r\n	public Date getCreatedStartSch() {\r\n		return createdStartSch;\r\n	}\r\n\r\n	public void setCreatedStartSch(Date createdStartSch) {\r\n		this.createdStartSch = createdStartSch;\r\n	}\r\n\r\n	@ValueField(column = \"createdTime\", equal = \"<\")\r\n	public Date getCreatedEndSch() {\r\n		if (createdEndSch != null) {\r\n			return DateUtil.getDateAfterDay(createdEndSch, 1);\r\n		}\r\n		return createdEndSch;\r\n	}\r\n\r\n	public void setCreatedEndSch(Date createdEndSch) {\r\n		this.createdEndSch = createdEndSch;\r\n	}\r\n\r\n\r\n#foreach($column in $columns) \r\n    private ${column.javaTypeBox} ${column.columnName}Sch;\r\n#end\r\n\r\n#foreach(${column} in ${columns}) \r\n    public void set${column.javaFieldNameUF}Sch(${column.javaTypeBox} ${column.columnName}Sch){\r\n        this.${column.columnName}Sch = ${column.columnName}Sch;\r\n    }\r\n    \r\n    @ValueField(column = \"${column.columnName}\")\r\n    public ${column.javaTypeBox} get${column.javaFieldNameUF}Sch(){\r\n        return this.${column.columnName}Sch;\r\n    }\r\n\r\n#end\r\n\r\n}', 'admin', 'Sch'), ('12', 'durc_Mybatis', 'mybatis/mapper', 'xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\r\n<!DOCTYPE  mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\" >\r\n<mapper namespace=\"${context.packageName}.dao.${ModelName}.${context.javaBeanName}Dao\">\r\n    <resultMap id=\"queryResultMap\" type=\"${context.packageName}.entity.${ModelName}.${context.javaBeanName}\">\r\n        #foreach($column in $columns)\r\n        <result column=\"${column.columnName}\" property=\"${column.javaFieldName}\" jdbcType=\"${column.mybatisJdbcType}\" />\r\n        #end\r\n    </resultMap>\r\n\r\n    <select id=\"find\" parameterType=\"org.durcframework.core.expression.ExpressionQuery\"\r\n		resultMap=\"queryResultMap\">\r\n		SELECT t.*\r\n		FROM ${table.tableName} t\r\n		<include refid=\"expressionBlock.where\" />\r\n		<choose>\r\n			<when test=\"sortname == null\">\r\n				ORDER BY t.${context.pkName} desc\r\n			</when>\r\n			<otherwise>\r\n				ORDER BY ${order}\r\n			</otherwise>\r\n		</choose>\r\n		<if test=\"!isQueryAll\">\r\n			LIMIT\r\n            #{firstResult,jdbcType=INTEGER},#{pageSize,jdbcType=INTEGER}\r\n		</if>\r\n	</select>\r\n\r\n\r\n    <select id=\"findTotalCount\" parameterType=\"org.durcframework.core.expression.ExpressionQuery\"\r\n		resultType=\"java.lang.Integer\">\r\n		SELECT count(*) FROM ${table.tableName} t\r\n		<include refid=\"expressionBlock.where\" />\r\n    </select>\r\n\r\n    <insert id=\"save\" parameterType=\"${context.packageName}.entity.${ModelName}.${context.javaBeanName}\"\r\n#if(${pkColumn.isIdentity})\r\n    keyProperty=\"${context.javaPkName}\" keyColumn=\"${context.pkName}\" useGeneratedKeys=\"true\"\r\n#end\r\n    >\r\n	INSERT INTO ${table.tableName}\r\n    <trim prefix=\"(\" suffix=\")\" suffixOverrides=\",\">\r\n        \r\n        #foreach($column in $columns) \r\n        <if test=\"${column.javaFieldName} != null\">\r\n            `${column.columnName}`,\r\n         </if>       \r\n        #end\r\n       \r\n    </trim>\r\n    <trim prefix=\"values (\" suffix=\")\" suffixOverrides=\",\">\r\n         #foreach($column in $columns) \r\n            <if test=\"${column.javaFieldName} != null\">\r\n            #{${column.columnName},jdbcType=${column.mybatisJdbcType}},\r\n            </if>\r\n         #end\r\n    </trim>\r\n	</insert>\r\n\r\n    <update id=\"update\" parameterType=\"${context.packageName}.entity.${ModelName}.${context.javaBeanName}\">\r\n    UPDATE ${table.tableName}\r\n        <set>\r\n        #foreach($column in $columns) \r\n            <if test=\"${column.javaFieldName} != null\">\r\n            ${column.columnName} = #{${column.javaFieldName},jdbcType=${column.mybatisJdbcType}},\r\n             </if> \r\n        #end\r\n        </set>\r\n    WHERE ${context.pkName} \r\n    <if test=\"${context.javaPkName} != null\">\r\n        = #{${context.javaPkName},jdbcType=${context.mybatisPkType}}\r\n    </if>\r\n    </update>\r\n\r\n    <select id=\"get\" resultMap=\"queryResultMap\" parameterType=\"${context.packageName}.entity.${ModelName}.${context.javaBeanName}\">\r\n		SELECT t.*\r\n		FROM ${table.tableName} t\r\n		WHERE ${context.pkName} = #{${context.javaPkName},jdbcType=${context.mybatisPkType}}\r\n	</select>\r\n	\r\n	<delete id=\"del\" parameterType=\"${context.packageName}.entity.${ModelName}.${context.javaBeanName}\">\r\n		DELETE FROM ${table.tableName}\r\n		WHERE ${context.pkName} = \r\n        <if test=\"${context.pkName} != null\">\r\n        #{${context.javaPkName},jdbcType=${context.mybatisPkType}}\r\n        </if>\r\n	</delete>\r\n\r\n</mapper>', 'admin', 'Mapper'), ('14', 'durc_Controller', 'controller', 'java', 'package ${context.packageName}.controller.${ModelName};\r\n\r\nimport org.durcframework.core.GridResult;\r\nimport org.durcframework.core.MessageResult;\r\nimport org.durcframework.core.controller.CrudController;\r\nimport ${context.packageName}.entity.${ModelName}.${context.javaBeanName};\r\nimport ${context.packageName}.entity.${ModelName}.${context.javaBeanName}Sch;\r\nimport ${context.packageName}.service.${ModelName}.${context.javaBeanName}Service;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.ResponseBody;\r\n\r\n@Controller\r\npublic class ${context.javaBeanName}Controller extends\r\n		CrudController<${context.javaBeanName}, ${context.javaBeanName}Service> {\r\n\r\n		//新增记录\r\n	@RequestMapping(\"/add${context.javaBeanName}.do\")\r\n	public @ResponseBody\r\n	MessageResult add${context.javaBeanName}(${context.javaBeanName} entity) {\r\n		return this.save(entity);\r\n	}\r\n\r\n	//删除记录\r\n	@RequestMapping(\"/del${context.javaBeanName}.do\")\r\n	public @ResponseBody\r\n	MessageResult del${context.javaBeanName}(${context.javaBeanName} entity) {\r\n		return this.delete(entity);\r\n	}\r\n	\r\n	//修改记录\r\n	@RequestMapping(\"/update${context.javaBeanName}.do\")\r\n	public @ResponseBody\r\n	MessageResult update${context.javaBeanName}(${context.javaBeanName} entity) {\r\n		return this.update(entity);\r\n	}\r\n\r\n	//条件查询分页操作\r\n	@RequestMapping(\"/list${context.javaBeanName}.do\")\r\n	public @ResponseBody\r\n	GridResult list${context.javaBeanName}(${context.javaBeanName}Sch searchEntitySch) {\r\n		return this.query(searchEntitySch);\r\n	}\r\n\r\n	\r\n	//条件查询并返回所有记录\r\n	@RequestMapping(\"/listAll${context.javaBeanName}.do\")\r\n    public @ResponseBody Object listAll${context.javaBeanName}(${context.javaBeanName}Sch searchEntitySch) {\r\n        return this.queryAll(searchEntitySch);\r\n    }\r\n\r\n    //获取详细信息\r\n	@RequestMapping(\"/get${context.javaBeanName}ById.do\")\r\n    public @ResponseBody ${context.javaBeanName} get${context.javaBeanName}ById(${context.javaBeanName} entity) {\r\n        return this.getService().get(entity.getId());\r\n    }\r\n\r\n 	\r\n\r\n}', 'admin', 'Controller'), ('20', 'durc_Jsp', 'view/jsp', 'jsp', '<%@ page language=\"java\" contentType=\"text/html; charset=utf-8\"\r\n    pageEncoding=\"utf-8\"%>\r\n<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">\r\n<html>\r\n    <head>\r\n        <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\r\n        <title>Insert title here</title>\r\n        <jsp:include page=\"/view/taglib.jsp\"></jsp:include>\r\n    </head>\r\n    <body>\r\n        <div class=\"easyui-layout\" data-options=\"fit:true\">\r\n            <div data-options=\"region:\'north\',split:true,border:false\" style=\"height:80px;\">\r\n                <form id=\"searchForm\">\r\n                    <table>\r\n                        <tr>\r\n                            <td><a id=\"btn_add\" class=\"easyui-linkbutton\" data-options=\"group:\'g1\',iconCls:\'icon-add\'\">添加</a></td>\r\n                            <td><a id=\"btn_dele\" class=\"easyui-linkbutton\" data-options=\"group:\'g1\',iconCls:\'icon-remove\'\">删除</a></td>\r\n                            <td><a onclick=\"grid.datagrid(\'reload\');\" href=\"javascript:void(0);\" class=\"easyui-linkbutton\" data-options=\"iconCls:\'ext-icon-arrow_refresh\'\">刷新</a></td>\r\n                        </tr>\r\n                    </table>\r\n                    <table>\r\n                        <tr>\r\n                            <td>用户名称</td>\r\n                            <td><input name=\"user_nameSch\" class=\"textbox\" style=\"width: 120px; height: 22px;\" /></td>\r\n                            <td>创建时间</td>\r\n                            <td><input name=\"createdStartSch\" class=\"easyui-datebox\" style=\"width: 100px\" />\r\n                                -\r\n                                <input name=\"createdEndSch\" class=\"easyui-datebox\" style=\"width: 100px\" />\r\n                            </td>\r\n                            <td><a href=\"javascript:void(0);\" class=\"easyui-linkbutton\" data-options=\"iconCls:\'ext-icon-zoom\',plain:true\" onclick=\"grid.datagrid(\'load\',fw.serializeObject($(\'#searchForm\')));\">过滤</a> <a href=\"javascript:void(0);\" id=\"reset_searchFilter\" class=\"easyui-linkbutton\" data-options=\"iconCls:\'ext-icon-zoom_out\',plain:true\" onclick=\"$(\'#searchForm input\').val(\'\');grid.datagrid(\'load\',{});\">重置过滤</a></td>\r\n                        </tr>\r\n                    </table>\r\n                </form>\r\n            </div>\r\n            <div data-options=\"region:\'center\',border:false\">\r\n                <table id=\"grid\">\r\n                </table>\r\n            </div>\r\n            <div data-options=\"region:\'east\',split:true,border:false\" style=\"width: 50%; padding: 5px;\">\r\n                <form id=\"form\" name=\"form\" method=\"post\" class=\"form\">\r\n                    <fieldset>\r\n                        <legend> 基本信息--<span id=\"operateMode_title\">添加模式</span> </legend>\r\n                        <table class=\"table\">\r\n                            <tbody>\r\n                                #foreach($column in $columns)\r\n                                #if(${column.isIdentityPk})\r\n                                <tr>\r\n                                    <th>${column.javaFieldName}</th>\r\n                                    <td><input id=\"${column.javaFieldName}\" readonly=\"readonly\" name=\"${column.javaFieldName}\" class=\"textbox\"      style=\"height: 22px;\" /></td>\r\n                                </tr>\r\n                                #end                       \r\n                                #if(!${column.isIdentityPk})    \r\n                                #if(${column.javaType}==\'boolean\')\r\n                                <tr>\r\n                                    <th>${column.javaFieldName}</th>\r\n                                    <td>\r\n                                    <td><input id=\"${column.javaFieldName}\" name=\"${column.javaFieldName}\" class=\"easyui-switchbutton\" checked></td>\r\n                                    </td>\r\n                                </tr>\r\n                                #end        \r\n                                #if(${column.javaType}==\'int\')\r\n                                <tr>\r\n                                    <th>${column.javaFieldName}</th>\r\n                                    <td><input id=\"${column.javaFieldName}\" value=\"0\" name=\"${column.javaFieldName}\" class=\"textbox\"   style=\"height: 22px;\" /></td>\r\n                                </tr>\r\n                                #end  \r\n                                #if(${column.javaType}==\'byte\')\r\n                                <tr>\r\n                                    <th>${column.javaFieldName}</th>\r\n                                    <td><input id=\"${column.javaFieldName}\" value=\"0\" name=\"${column.javaFieldName}\" class=\"textbox\"   style=\"height: 22px;\" /></td>\r\n                                </tr>\r\n                                #end\r\n                                #if(${column.javaType}==\'String\' and  ${column.type}==\'VARCHAR\')\r\n                                <tr>\r\n                                    <th>${column.javaFieldName}</th>\r\n                                    <td><input id=\"${column.javaFieldName}\" name=\"${column.javaFieldName}\" class=\"textbox\"      style=\"height: 22px;\" /></td>\r\n                                </tr>\r\n                                #end     \r\n                                #if(${column.javaType}==\'String\' and ${column.type}==\'longtext\')\r\n                                <tr>\r\n                                    <th>${column.javaFieldName}</th>\r\n                                    <td colspan=\"3\"><textarea id=\"${column.javaFieldName}\" name=\"${column.javaFieldName}\" style=\"width: 98%; margin-bottom: 3px;\"></textarea>\r\n                                        <input type=\"button\" mode=\"0\" class=\"editor\" onclick=\"EditorRender(\'${column.javaFieldName}\',$(this))\" value=\"切换至编辑器\" />\r\n                                    </td>\r\n                                </tr>\r\n                                #end    \r\n                                #if(${column.javaType}==\'Date\')\r\n                                <tr>\r\n                                    <th>${column.javaFieldName}</th>\r\n                                    <td><input id=\"${column.javaFieldName}\" name=\"${column.javaFieldName}\" data-options=\"disabled:true\" class=\"easyui-datetimebox\"  style=\"width: 180px;\" /></td>\r\n                                </tr>\r\n                                #end             \r\n                                #end \r\n                                #end\r\n                                <th>操作</th>\r\n                                <td><a id=\"operateMode_submit\" class=\"easyui-linkbutton\" data-options=\"iconCls:\'icon-save\'\">确定</a> <a id=\"operateMode_reset\" class=\"easyui-linkbutton\" data-options=\"iconCls:\'icon-reload\'\">重置</a></td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </fieldset>\r\n                </form>\r\n            </div>\r\n        </div>\r\n        <script type=\"text/javascript\">\r\n            $(function() {\r\n                var gird;\r\n                grid=$(\'#grid\').datagrid({\r\n                    fit:true,\r\n                    border : false,\r\n                    collapsible : false,\r\n                    rownumbers : true,\r\n                    pagination : true,\r\n                    singleSelect : true,\r\n                    rownumbers : true,\r\n                    url:ctx+\'list${context.javaBeanName}.do\',\r\n                    columns:[[\r\n            		#foreach($column in $columns)  \r\n                       \r\n            			#if($velocityCount != 1),#end{ sortable:true,field:\'${column.javaFieldName}\',title:\'${column.javaFieldName}\'}\r\n            		#end \r\n                    ]],\r\n                    onLoadSuccess : function(data) {\r\n                        $(\'.iconImg\').attr(\'src\', fw.pixel_0);\r\n                    },\r\n                    onClickRow : function(index, row) {\r\n                        $(\"#form\").form(\"load\", row);\r\n                        $(\"#operateMode_title\").html(\"修改模式\");\r\n                    }\r\n                });\r\n                //添加操作\r\n                $(\"#btn_add\").click(function() {\r\n                    $(\"#operateMode_title\").html(\"添加模式\");\r\n                    $(\'#grid\').datagrid(\"unselectAll\");\r\n                    $(\"#${context.javaPkName}\").attr(\"value\", 0);\r\n                    $(\"#form\").form(\"reset\");\r\n                })\r\n            \r\n                //删除操作\r\n                $(\"#btn_dele\").click(function() {\r\n                    var rows = $(\'#grid\').datagrid(\'getSelections\');\r\n                    if (rows <= 0) {\r\n                        $.messager.show({\r\n                            title : message.title.normal,\r\n                            msg : message.grid_select,\r\n                            timeout : message.timeout,\r\n                            showType : message.showType\r\n                        });\r\n                    } else {\r\n                        $.messager.confirm(message.title.askTitle, message.dele_comfirm, function(r) {\r\n                            if (r) {\r\n                                var idValue = $(\"#form input[name=\'${context.javaPkName}\']\").val();\r\n                                $.post(ctx+\"del${context.javaBeanName}.do\", {\r\n                                    ${context.pkName} : idValue\r\n                                }, function(result) {\r\n                                    if (result.success) {\r\n                                        $.messager.show({\r\n                                            title : message.title.normal,\r\n                                            msg : message.dele_success,\r\n                                            timeout : message.timeout,\r\n                                            showType : message.showType\r\n                                        });\r\n                                        grid.datagrid(\'reload\');\r\n                                    } else {\r\n                                        $.messager.show({\r\n                                            title : message.title.normal,\r\n                                            msg : message.dele_fail,\r\n                                            timeout : message.timeout,\r\n                                            showType : message.showType\r\n                                        });\r\n                                    }\r\n                                }, \'json\');\r\n                                $(\"#btn_add\").click();\r\n                            }\r\n                        });\r\n                    }\r\n                })\r\n            \r\n                //确认提交操作\r\n                $(\"#operateMode_submit\").click(function() {\r\n                    var idValue = $(\"#form input[name=\'${context.javaPkName}\']\").val();\r\n                    if ($(\'#form\').form(\'validate\')) {\r\n                        if (idValue > 0) {\r\n                            //修改\r\n                            $.post(ctx+\"update${context.javaBeanName}.do\", fw.serializeObject($(\'form\')), function(result) {\r\n                                if (result.success) {\r\n                                    $.messager.show({\r\n                                        title : message.title.normal,\r\n                                        msg : message.update_success,\r\n                                        timeout : message.timeout,\r\n                                        showType : message.showType\r\n                                    });\r\n            \r\n                                    grid.datagrid(\"reload\");\r\n            \r\n                                    //重新获取form信息内容\r\n                                    $(\"#form\").form(\"load\", ctx+\"get${context.javaBeanName}By${context.javaPKNameUppercase}.do?${context.javaPkName}=\" + idValue);\r\n                                }\r\n                            }, \'json\');\r\n                        } else {\r\n                            if(idValue.trim().length == 0){\r\n                                $.messager.show({\r\n                                    title : message.title.normal,\r\n                                    msg : message.add_button_click,\r\n                                    timeout : message.timeout,\r\n                                    showType : message.showType\r\n                                });\r\n                            }else{\r\n                                //添加\r\n                                $.post(ctx+\"add${context.javaBeanName}.do\", fw.serializeObject($(\'form\')), function(result) {\r\n                                    if (result.success) {\r\n                                        $.messager.show({\r\n                                            title : message.title.normal,\r\n                                            msg : message.add_success,\r\n                                            timeout : message.timeout,\r\n                                            showType : message.showType\r\n                                        });\r\n                                        grid.datagrid(\"reload\");\r\n                                        $(\"#form\").form(\"reset\");\r\n                                    }\r\n                                }, \'json\');\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n                //重置操作\r\n                $(\"#operateMode_reset\").click(function() {\r\n                    var idValue = $(\"#form input[name=\'${context.javaPkName}\']\").val();\r\n                    if (idValue > 0) {\r\n                        $(\"#form\").form(\"load\",ctx+\"get${context.javaBeanName}By${context.javaPKNameUppercase}.do?${context.javaPkName}=\" + idValue);\r\n                    } else {\r\n                        $(\"#form\").form(\"reset\");\r\n                    }\r\n                })\r\n            });\r\n        </script>\r\n    </body>\r\n</html>', 'admin', '');
COMMIT;

